define(function(e,t,o){(t.module=angular.module("application.logon",["ng","system.security","gui.qrcode","system.devices"])).controller("AppAuthenticateController",["$scope","$location","authenticationService","$resource","$interval","$rootElement","$resource",function(e,t,o,a,n,c,a){if(o.deauthenticate(),e.title={locale:e.language.getLocale(),locales:e.language.getLocales()},e.$watch("title.locale",function(t){e.language.setLocale(t)}),e.login_class=e.device.mobile?"login-mobile":"login-desktop",e.timeout=90,e.auth_data={user:"",password:""},e.device.mobile)e.signOn=function(){o.authenticate(e.auth_data.user,e.auth_data.password)},e.device.support("power","shutdown")&&(e.shutdown=function(){a("device://power").get({action:"shutdown"},angular.noop,function(e){console.log(e.message)})});else{var i=a("qrcode-generate",null,{data:{method:"POST"}}),l=a("qrcode-await",null,{await:{method:"POST",timeout:1e3*e.timeout,cancellable:!0}});e.qrcode={data:""},e.loading=!1,i.data({},function(a){e.tcancel&&n.cancel(e.tcancel),e.timeout=90,e.loading=!0,e.qrcode={data:a.address+"/"+a.session,options:{scale:4}},l.await({session:a.session},function(t){n.cancel(e.tcancel),o.confirm(t.confirm)},function(){t.path("/modules/2048/main")}),e.tcancel=n(function(){e.timeout--},1e3,e.timeout)})}}])});