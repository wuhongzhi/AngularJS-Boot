define(["text","crypto","jquery"],function(t,a,e){var i="cache://",c=e(document.head||document.querySelector&&document.querySelector("head"));return{$$init:function(){var o=t.get.bind(t);t.get=function(t,e,r){var n=i+a.SHA256(t),c=localStorage.getItem(n);c?(c=a.AES.decrypt(c,n,{iv:n}).toString(a.enc.Utf8),e(c)):o(t,function(t){e(t);try{t=a.AES.encrypt(t,n,{iv:n}),localStorage.setItem(n,t)}catch(t){}},r)}},$$clean:function(){for(var t in localStorage)if(t.startsWith(i))try{localStorage.removeItem(t)}catch(t){}},load:function(e,t,r,n){requirejs(["text!"+requirejs.toUrl(e.substr(e.lastIndexOf("!")+1))],function(t){if(/\.json$/.test(e))r(JSON.parse(t));else if(/\.js$/.test(e))r.fromText(t);else if(/\.css$/.test(e))try{c.append("<style>"+t+"</style>")}finally{r("")}else r(t)})}}});