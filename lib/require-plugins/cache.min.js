define(["text","crypto"],function(t,a){var c,i="cache://";return c={$$apply:function(){},$$style:function(){},$$init:function(){var o=t.get.bind(t);t.get=function(t,e,n){var r=i+a.AES.encrypt(t,t),c=localStorage.getItem(r);c?(c=a.AES.decrypt(c,r).toString(a.enc.Utf8),e(c)):o(t,function(t){e(t);try{t=a.AES.encrypt(t,r),localStorage.setItem(r,t)}catch(t){}},n)}},$$clean:function(){for(var t in localStorage)if(t.startsWith(i))try{localStorage.removeItem(t)}catch(t){}},load:function(e,t,n,r){requirejs(["text!"+requirejs.toUrl(e.substr(e.lastIndexOf("!")+1))],function(t){if(/\.json$/.test(e))n(JSON.parse(t));else if(/\.js$/.test(e))n.fromText(t);else if(/\.css$/.test(e))try{c.$$style(t)}finally{n("")}else n(t);c.$$apply()})}}});