define(["text","crypto"],function(t,o){var c,a="cache://";return c={$$style:function(){},$$init:function(){var i=t.get.bind(t);t.get=function(t,e,n){var r=a+o.SHA256(t),c=localStorage.getItem(r);c?(c=o.AES.decrypt(c,r,{iv:r}).toString(o.enc.Utf8),e(c)):i(t,function(t){e(t);try{t=o.AES.encrypt(t,r,{iv:r}),localStorage.setItem(r,t)}catch(t){}},n)}},$$clean:function(){for(var t in localStorage)if(t.startsWith(a))try{localStorage.removeItem(t)}catch(t){}},load:function(e,t,n,r){requirejs(["text!"+requirejs.toUrl(e.substr(e.lastIndexOf("!")+1))],function(t){if(/\.json$/.test(e))n(JSON.parse(t));else if(/\.js$/.test(e))n.fromText(t);else if(/\.css$/.test(e))try{c.$$style(t)}finally{n("")}else n(t)})}}});