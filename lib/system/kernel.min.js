define(["environment","version","cache","require"],function(t,r,i,c){var o=t.uefi,a=Array.prototype.slice,s="system.version",l=Modernizr.localstorage&&o.prodMode&&function(){var e=localStorage.getItem(s),n=r.version||"1.0.0";if(e&&e!==n){i.$$clean();try{localStorage.setItem(s,n)}catch(e){}}else try{e||localStorage.setItem(s,n)}catch(e){}return!(void 0!==r.cache&&!r.cache)&&(i.$$prefix="cache!",i.$$init(),!0)}(),u={$$cacheUrl:function(e){return l&&e&&-1===e.lastIndexOf(i.$$prefix)?i.$$prefix+e:e}};c([u.$$cacheUrl("json!lib/system/etc/kernel.json")],function(r){r=r.depends;var e=Object.keys(r.shim);["baseUrl","shim","waitSeconds"].forEach(function(n){void 0===r[n]?r[n]=t[n]:Object.keys(t[n]).forEach(function(e){r[n][e]=t[n][e]}),delete t[n]}),requirejs.config(r),c(e,function(){if(define("application",angular.extend(u,{uefi:t.uefi,$$config:function(){a.apply(arguments).forEach(function(e){angular.merge(r,e)}),requirejs.config(r)},$$baseUrl:function(){return r.baseUrl}})),l){var e=document.head||document.querySelector&&document.querySelector("head"),n=angular.element(e);i.$$style=function(e){n.append("<style>"+e+"</style>")}}requirejs.undef("environment"),o.progress("Init","loading"),c(["lib/system/init"],function(){o.progress("Init","ready")})})})});