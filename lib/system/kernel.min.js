define(["environment","version","json!lib/system/kernel.json"],function(e,n,r){"use strict";var t=e.uefi,i=Array.prototype.slice,o=Object.keys(r.shim);["baseUrl","shim","waitSeconds"].forEach(function(n){void 0===r[n]?r[n]=e[n]:Object.keys(e[n]).forEach(function(t){r[n][t]=e[n][t]}),delete e[n]}),requirejs.config(r),requirejs(["cache"].concat(o),function(o){var c=Modernizr.localstorage&&t.prodMode&&function(){var e=localStorage.getItem("system.version"),r=n.version||"1.0.0";if(e&&e!==r){o.$$clean();try{localStorage.setItem("system.version",r)}catch(e){}}else try{e||localStorage.setItem("system.version",r)}catch(e){}if(void 0!==n.cache&&!n.cache)return!1;var t=angular.element(document),i=t.find("head"),c=t.data();return angular.extend(o,{$$prefix:"cache!",$$apply:function(e){var n=c.$scope||c.$injector&&c.$injector.get("$rootScope");n&&n.$applyAsync(e)},$$style:function(e){i.append("<style>"+e+"</style>")}}),o.$$init(),!0}();define("application",{uefi:e.uefi,$$config:function(){i.apply(arguments).forEach(function(e){angular.merge(r,e)}),requirejs.config(r)},$$baseUrl:function(){return r.baseUrl},$$cacheUrl:function(e){if(!c||!e)return e;return-1===e.lastIndexOf(o.$$prefix)?o.$$prefix+e:e}}),requirejs.undef("environment"),t.progress("Init","loading"),requirejs(["lib/system/init"],function(){t.progress("Init","ready")})})});