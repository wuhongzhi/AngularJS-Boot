define(["require","exports","application"],function(e,a,o){var t=a.module=angular.module("system.dynamic",["system.http","gui.language"]),n=o.dependModules,r=Array.prototype.slice,p=o.uefi;t.config(function(){p.progress("Application","setup system.dynamics")}).run(["$rootScope","$location","$route","$injector",function(a,o,t,s){var i=a.$broadcast;a.$on("$locationChangeStart",function(u){var l=t.routes[o.path()];if(l&&!l.ready&&!l.inProgress&&!u.defaultPrevented){l.inProgress=!0,u.preventDefault();r.apply(arguments);var c=l.language[a.language.getLocale()];p.progress("Application","load dynamic module > "+l.extras.path);var d=n(l,[]).map(function(e){return e.script});e(d.concat([l.script,c]),function(){var e=r.apply(arguments),t=e.pop();e=e.map(function(e){return p.progress("Application","setup module > "+e.module.name),e.module.name}),p.progress("Application","setup module > "+l.extras.path),s.loadNewModules(e),a.language.loadLanguage([[c,t]]),e[0]="$locationChangeSuccess",l.ready=!0,l.inProgress=!1,l.extras.dynamic=!1,o.path(l.extras.path),i.apply(a,e)})}})}])});