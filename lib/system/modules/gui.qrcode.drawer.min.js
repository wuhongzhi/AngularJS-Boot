define(["require","exports"],function(r,e){e.ngQrcode=function(l){return{replace:!0,restrict:"A",require:"ngModel",template:Modernizr.canvas?"<canvas ng-hide></canvas>":"<div ng-hide style='position:relative;background:#ffffff;'></div>",link:function(r,i,e,a){var n=new Image,o=!!e.ngBrand;o&&(n.src=e.ngBrand,angular.element(n).on("load",function(){n.ready=!0,n.$render&&n.$render()})),a.$render=function(){var r=a.$modelValue;if(!r||a.$isEmpty(r.data))return n.$render=null,i.addClass("ng-hide");var e=angular.merge({errorCorrectionLevel:"Q",color:{dark:"#00007f",light:"#ffffff"}},r.options),t=l(r,e);Modernizr.canvas?(!function(r,e,t){var i=t.scale||4,a=t.margin||4,n=e.length,o=(n+2*a)*i;r.attr("width",o).attr("height",o),r.css("margin-left","calc(50% - "+o/2+"px)");var l=r[0].getContext("2d");l.fillStyle="#ffffff",l.fillRect(0,0,o,o);var f=t.color.dark||"#000000";l.fillStyle=f;for(var d=0;d<n;d++)for(var s=0;s<n;s++)if(e[d][s]){var c=(d+a)*i,v=(s+a)*i;l.fillRect(c,v,i,i)}}(i,t,e),(n.$render=function(){if(o&&!n.ready||i.removeClass("ng-hide"),n.ready){var r=i[0].getContext("2d"),e=(i.width()-48)/2;r.fillStyle="#ffffff",r.strokeStyle="#00007f",r.lineWidth=2,function(r,e,t,i,a,n,o,l){void 0===l&&(l=!0);void 0===n&&(n=5);if("number"==typeof n)n={tl:n,tr:n,br:n,bl:n};else{var f={tl:0,tr:0,br:0,bl:0};for(var d in f)n[d]=n[d]||f[d]}r.beginPath(),r.moveTo(e+n.tl,t),r.lineTo(e+i-n.tr,t),r.quadraticCurveTo(e+i,t,e+i,t+n.tr),r.lineTo(e+i,t+a-n.br),r.quadraticCurveTo(e+i,t+a,e+i-n.br,t+a),r.lineTo(e+n.bl,t+a),r.quadraticCurveTo(e,t+a,e,t+a-n.bl),r.lineTo(e,t+n.tl),r.quadraticCurveTo(e,t,e+n.tl,t),r.closePath(),o&&r.fill();l&&r.stroke()}(r,e,e,48,48,5,!0,!0),r.clip(),r.drawImage(n,e,e,48,48)}})()):((Modernizr.svg?function(r,e,t,i){var a=t.scale||4,n=t.margin||4,o=e.length,l=(o+2*n)*a,f=t.color.dark||"#000000";r.width(l).height(l),r.css("margin-left","calc(50% - "+l/2+"px)");for(var d="",s=0;s<o;s+=1)for(var c=0;c<o;c+=1)if(e[s][c]){var v=(c+n)*a,g=(s+n)*a;d+="M"+v+" "+g+"h"+a+"v"+a+"h-"+a+"z"}var u=['<svg xmlns="http://www.w3.org/2000/svg" viewBox="'+[0,0,l,l].join(" ")+'">','<path d="'+d+'" fill="'+f+'"/>',"</svg>"];r.html(u.join(""))}:function(r,e,t,i){var a=t.scale||4,n=t.margin||4,o=e.length,l=(o+2*n)*a,f=t.color.dark||"#000000";r.width(l).height(l),r.css("margin-left","calc(50% - "+l/2+"px)");for(var d="qrs"+(new Date).getTime(),s="<style>."+d+"{position:absolute;background:"+f+";width:"+a+"px;height:"+a+"px;}</style>",c=0;c<o;c++)for(var v=0;v<o;v++)if(e[c][v]){var g=(c+n)*a,u=(v+n)*a;s+="<div class='"+d+"' style='left:"+g+"px;top:"+u+"px;'></div>"}r.html(s)})(i,t,e),(n.$render=function(){if(o&&!n.ready||i.removeClass("ng-hide"),n.ready){var r=(i.width()-48)/2;i.css({position:"relative"}).append(angular.element(n).css({top:r,left:r,width:48,height:48,"border-width":2,"border-style":"solid","-webkit-border-radius":5,"-moz-border-radius":5,"border-radius":5,"background-color":"#ffffff","border-color":"#00007f",position:"absolute"}))}})())}}}}});